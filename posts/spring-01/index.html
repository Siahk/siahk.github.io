<!doctype html><html lang=en><head>
<meta name=generator content="Hugo 0.88.1">
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta property="og:title" content="Spring 01">
<meta name=keywords content="Spring,IOC"><meta name=description content="1. Spring Spring是一个开源的轻量级、非入侵式的控制反转（IOC）、面向切片编程（AOP）的免费框架。
1.1. Spring Boot 快速开发的脚手架。 基于SpringBoot可以快速的开发单个微服务。 约定大于配置。
弊端：发展太久，配置十分繁琐
导入包： …"><meta property="og:title" content="Spring 01">
<meta property="og:description" content="1. Spring Spring是一个开源的轻量级、非入侵式的控制反转（IOC）、面向切片编程（AOP）的免费框架。
1.1. Spring Boot 快速开发的脚手架。 基于SpringBoot可以快速的开发单个微服务。 约定大于配置。
弊端：发展太久，配置十分繁琐
导入包：
<!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --> <dependency> <groupId>org.springframework</groupId> <artifactId>spring-webmvc</artifactId> <version>5.3.5</version> </dependency> <dependency> <groupId>org.springframework</groupId> <artifactId>spring-jdbc</artifactId> <version>5.3.5</version> </dependency> 2. IOC 2.1. Bean <!-- bean: 创建对象 ref: 应用Spring容器中创建好的对象 value: 具体的值，基本数据类型 --> <bean id=&#34;hello&#34; class=&#34;com.siahk.pojo.Hello&#34;> <property name=&#34;name&#34; value=&#34;spring&#34; /> </bean> <> 3. 创建对象的方式 3.1. 下标赋值 <bean id=&#34;user&#34; class=&#34;com.siahk.User&#34;> <constructor-arg index=&#34;0&#34; value=&#34;qinjiang&#34;/> </bean> 3.2. 类型赋值（不建议） <bean id=&#34;user&#34; class=&#34;com.siahk.User&#34;> <constructor-arg index=&#34;java.lang.String&#34; value=&#34;qinjiang&#34;/> </bean> 3.3. 参数名 <bean id=&#34;user&#34; class=&#34;com.siahk.User&#34;> <constructor-arg name=&#34;name&#34; value=&#34;qinjiang&#34;/> </bean>  总结：在配置文件加载时，容器中管理的对象就已经实例化了。  4.">
<meta property="og:type" content="article">
<meta property="og:url" content="http://siahk.github.io/posts/spring-01/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-03-26T17:39:32+08:00">
<meta property="article:modified_time" content="2021-03-26T17:39:32+08:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Spring 01">
<meta name=twitter:description content="1. Spring Spring是一个开源的轻量级、非入侵式的控制反转（IOC）、面向切片编程（AOP）的免费框架。
1.1. Spring Boot 快速开发的脚手架。 基于SpringBoot可以快速的开发单个微服务。 约定大于配置。
弊端：发展太久，配置十分繁琐
导入包：
<!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --> <dependency> <groupId>org.springframework</groupId> <artifactId>spring-webmvc</artifactId> <version>5.3.5</version> </dependency> <dependency> <groupId>org.springframework</groupId> <artifactId>spring-jdbc</artifactId> <version>5.3.5</version> </dependency> 2. IOC 2.1. Bean <!-- bean: 创建对象 ref: 应用Spring容器中创建好的对象 value: 具体的值，基本数据类型 --> <bean id=&#34;hello&#34; class=&#34;com.siahk.pojo.Hello&#34;> <property name=&#34;name&#34; value=&#34;spring&#34; /> </bean> <> 3. 创建对象的方式 3.1. 下标赋值 <bean id=&#34;user&#34; class=&#34;com.siahk.User&#34;> <constructor-arg index=&#34;0&#34; value=&#34;qinjiang&#34;/> </bean> 3.2. 类型赋值（不建议） <bean id=&#34;user&#34; class=&#34;com.siahk.User&#34;> <constructor-arg index=&#34;java.lang.String&#34; value=&#34;qinjiang&#34;/> </bean> 3.3. 参数名 <bean id=&#34;user&#34; class=&#34;com.siahk.User&#34;> <constructor-arg name=&#34;name&#34; value=&#34;qinjiang&#34;/> </bean>  总结：在配置文件加载时，容器中管理的对象就已经实例化了。  4.">
<link rel=stylesheet type=text/css media=screen href=/css/normalize.css>
<link rel=stylesheet type=text/css media=screen href=/css/main.css>
<link rel=stylesheet type=text/css media=screen href=/css/all.css>
<link rel=stylesheet href=/css/katex.min.css crossorigin=anonymous>
<script defer src=/js/katex.min.js integrity=sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz crossorigin=anonymous></script>
<script defer src=/js/auto-render.min.js integrity=sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI crossorigin=anonymous onload=renderMathInElement(document.body)></script><title>Spring 01 | Siahk'Blog</title>
</head>
<body><header>
<div id=titletext><h2 id=title><a href=http://siahk.github.io/>Siahk'Blog</a></h2></div>
<div id=title-description><p id=subtitle>Later equals never.</p><div id=social>
<nav>
<ul>
<li><a href=https://github.com/Siahk><i title=Github class="icons fab fa-github"></i></a></li>
<li><a href=/index.xml><i title=RSS class="icons fas fa-rss"></i></a></li></ul>
</nav>
</div>
</div>
<div id=mainmenu>
<nav>
<ul>
<li><a href=/>Home</a></li>
<li><a href=/posts>Blogs</a></li>
<li><a href=/about>About</a></li>
<li><a href=/tags>Tags</a></li>
<li><a href=/categories>Categories</a></li>
</ul>
</nav>
</div>
</header>
<main><div class=post>
<div class=author>
</div>
<div class=post-header>
<div class=meta>
<div class=date>
<span class=day>26</span>
<span class=rest>Mar 2021</span>
</div>
</div>
<div class=matter>
<h1 class=title>Spring 01</h1>
</div>
</div>
<div class=markdown>
<h1 id=1-spring>1. Spring</h1>
<p>Spring是一个开源的轻量级、非入侵式的控制反转（IOC）、面向切片编程（AOP）的免费框架。</p>
<h2 id=11-spring-boot>1.1. Spring Boot</h2>
<p>快速开发的脚手架。
基于SpringBoot可以快速的开发单个微服务。
约定大于配置。</p>
<p>弊端：发展太久，配置十分繁琐</p>
<p>导入包：</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#888>&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;</span>
<span style=color:#070>&lt;dependency&gt;</span>
    <span style=color:#070>&lt;groupId&gt;</span>org.springframework<span style=color:#070>&lt;/groupId&gt;</span>
    <span style=color:#070>&lt;artifactId&gt;</span>spring-webmvc<span style=color:#070>&lt;/artifactId&gt;</span>
    <span style=color:#070>&lt;version&gt;</span>5.3.5<span style=color:#070>&lt;/version&gt;</span>
<span style=color:#070>&lt;/dependency&gt;</span>
</code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#070>&lt;dependency&gt;</span>
    <span style=color:#070>&lt;groupId&gt;</span>org.springframework<span style=color:#070>&lt;/groupId&gt;</span>
    <span style=color:#070>&lt;artifactId&gt;</span>spring-jdbc<span style=color:#070>&lt;/artifactId&gt;</span>
    <span style=color:#070>&lt;version&gt;</span>5.3.5<span style=color:#070>&lt;/version&gt;</span>
<span style=color:#070>&lt;/dependency&gt;</span>
</code></pre></div><h1 id=2-ioc>2. IOC</h1>
<h2 id=21-bean>2.1. Bean</h2>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#888>&lt;!-- 
</span><span style=color:#888>    bean: 创建对象
</span><span style=color:#888>    ref: 应用Spring容器中创建好的对象
</span><span style=color:#888>    value: 具体的值，基本数据类型
</span><span style=color:#888>--&gt;</span>
<span style=color:#070>&lt;bean</span> <span style=color:#00c>id=</span><span style=background-color:#fff0f0>&#34;hello&#34;</span> <span style=color:#00c>class=</span><span style=background-color:#fff0f0>&#34;com.siahk.pojo.Hello&#34;</span><span style=color:#070>&gt;</span>
    <span style=color:#070>&lt;property</span> <span style=color:#00c>name=</span><span style=background-color:#fff0f0>&#34;name&#34;</span> <span style=color:#00c>value=</span><span style=background-color:#fff0f0>&#34;spring&#34;</span> <span style=color:#070>/&gt;</span>
<span style=color:#070>&lt;/bean&gt;</span>
<span style=color:red;background-color:#faa>&lt;</span>&gt;
</code></pre></div><h1 id=3-创建对象的方式>3. 创建对象的方式</h1>
<h2 id=31-下标赋值>3.1. 下标赋值</h2>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#070>&lt;bean</span> <span style=color:#00c>id=</span><span style=background-color:#fff0f0>&#34;user&#34;</span> <span style=color:#00c>class=</span><span style=background-color:#fff0f0>&#34;com.siahk.User&#34;</span><span style=color:#070>&gt;</span>
    <span style=color:#070>&lt;constructor-arg</span> <span style=color:#00c>index=</span><span style=background-color:#fff0f0>&#34;0&#34;</span> <span style=color:#00c>value=</span><span style=background-color:#fff0f0>&#34;qinjiang&#34;</span><span style=color:#070>/&gt;</span>
<span style=color:#070>&lt;/bean&gt;</span>
</code></pre></div><h2 id=32-类型赋值不建议>3.2. 类型赋值（不建议）</h2>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#070>&lt;bean</span> <span style=color:#00c>id=</span><span style=background-color:#fff0f0>&#34;user&#34;</span> <span style=color:#00c>class=</span><span style=background-color:#fff0f0>&#34;com.siahk.User&#34;</span><span style=color:#070>&gt;</span>
    <span style=color:#070>&lt;constructor-arg</span> <span style=color:#00c>index=</span><span style=background-color:#fff0f0>&#34;java.lang.String&#34;</span> <span style=color:#00c>value=</span><span style=background-color:#fff0f0>&#34;qinjiang&#34;</span><span style=color:#070>/&gt;</span>
<span style=color:#070>&lt;/bean&gt;</span>
</code></pre></div><h2 id=33-参数名>3.3. 参数名</h2>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#070>&lt;bean</span> <span style=color:#00c>id=</span><span style=background-color:#fff0f0>&#34;user&#34;</span> <span style=color:#00c>class=</span><span style=background-color:#fff0f0>&#34;com.siahk.User&#34;</span><span style=color:#070>&gt;</span>
    <span style=color:#070>&lt;constructor-arg</span> <span style=color:#00c>name=</span><span style=background-color:#fff0f0>&#34;name&#34;</span> <span style=color:#00c>value=</span><span style=background-color:#fff0f0>&#34;qinjiang&#34;</span><span style=color:#070>/&gt;</span>
<span style=color:#070>&lt;/bean&gt;</span>
</code></pre></div><ul>
<li>总结：在配置文件加载时，容器中管理的对象就已经实例化了。</li>
</ul>
<h1 id=4-spring的配置说明>4. Spring的配置说明</h1>
<h2 id=41-别名>4.1. 别名</h2>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#070>&lt;alias</span> <span style=color:#00c>name=</span><span style=background-color:#fff0f0>&#34;user&#34;</span> <span style=color:#00c>alias=</span><span style=background-color:#fff0f0>&#34;user2&#34;</span><span style=color:#070>/&gt;</span>
</code></pre></div><h2 id=42-bean-配置>4.2. bean 配置</h2>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#888>&lt;!--
</span><span style=color:#888>    id: bean的唯一标识符。
</span><span style=color:#888>    class: bean 对象所对应的全限定名：包名 + 类型。
</span><span style=color:#888>    name: 别名,更高级，可以取多个别名。
</span><span style=color:#888>--&gt;</span>
    <span style=color:#070>&lt;bean</span> <span style=color:#00c>id=</span><span style=background-color:#fff0f0>&#34;userT&#34;</span> <span style=color:#00c>class=</span><span style=background-color:#fff0f0>&#34;com.siahk.pojo.UserT&#34;</span> <span style=color:#00c>name=</span><span style=background-color:#fff0f0>&#34;userT2，userT3&#34;</span><span style=color:#070>&gt;</span>
        <span style=color:#070>&lt;property</span> <span style=color:#00c>name=</span><span style=background-color:#fff0f0>&#34;name&#34;</span> <span style=color:#00c>value=</span><span style=background-color:#fff0f0>&#34;西部开源&#34;</span><span style=color:#070>/&gt;</span>
    <span style=color:#070>&lt;/bean&gt;</span>  
</code></pre></div><h2 id=43-import>4.3. import</h2>
<p>一般用于团 队开发使用，他可以将多个配置文件导入合并为一个。</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml>    <span style=color:#070>&lt;import</span> <span style=color:#00c>resource=</span><span style=background-color:#fff0f0>&#34;beans2.xml&#34;</span><span style=color:#070>/&gt;</span>
    <span style=color:#070>&lt;import</span> <span style=color:#00c>resource=</span><span style=background-color:#fff0f0>&#34;beans.xml&#34;</span><span style=color:#070>/&gt;</span>
    <span style=color:#070>&lt;import</span> <span style=color:#00c>resource=</span><span style=background-color:#fff0f0>&#34;beans3.xml&#34;</span><span style=color:#070>/&gt;</span>
</code></pre></div><h1 id=5-依赖注入>5. 依赖注入</h1>
<h2 id=51-构造器注入>5.1. 构造器注入</h2>
<p><code>construct-args</code></p>
<h2 id=52-set方式注入-重点>5.2. Set方式注入 【重点】</h2>
<ul>
<li>依赖注入：Set注入
<ul>
<li>依赖：Bean对象的创建依赖于容器</li>
<li>注入：Bean对象中的所有属性，由容器来注入</li>
</ul>
</li>
</ul>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml>    <span style=color:#070>&lt;bean</span> <span style=color:#00c>id=</span><span style=background-color:#fff0f0>&#34;address&#34;</span> <span style=color:#00c>class=</span><span style=background-color:#fff0f0>&#34;com.siahk.pojo.Address&#34;</span><span style=color:#070>&gt;</span>
        <span style=color:#070>&lt;property</span> <span style=color:#00c>name=</span><span style=background-color:#fff0f0>&#34;address&#34;</span> <span style=color:#00c>value=</span><span style=background-color:#fff0f0>&#34;西安&#34;</span><span style=color:#070>/&gt;</span>
    <span style=color:#070>&lt;/bean&gt;</span>

    <span style=color:#070>&lt;bean</span> <span style=color:#00c>id=</span><span style=background-color:#fff0f0>&#34;student&#34;</span> <span style=color:#00c>class=</span><span style=background-color:#fff0f0>&#34;com.siahk.pojo.Student&#34;</span><span style=color:#070>&gt;</span>
        <span style=color:#888>&lt;!--        第一种，普通值注入，value--&gt;</span>
        <span style=color:#070>&lt;property</span> <span style=color:#00c>name=</span><span style=background-color:#fff0f0>&#34;name&#34;</span> <span style=color:#00c>value=</span><span style=background-color:#fff0f0>&#34;qinjiang&#34;</span><span style=color:#070>/&gt;</span>
        <span style=color:#888>&lt;!--        第二种，bean注入，ref--&gt;</span>
        <span style=color:#070>&lt;property</span> <span style=color:#00c>name=</span><span style=background-color:#fff0f0>&#34;address&#34;</span> <span style=color:#00c>ref=</span><span style=background-color:#fff0f0>&#34;address&#34;</span><span style=color:#070>/&gt;</span>
        <span style=color:#888>&lt;!--        数组注入，ref--&gt;</span>
        <span style=color:#070>&lt;property</span> <span style=color:#00c>name=</span><span style=background-color:#fff0f0>&#34;books&#34;</span><span style=color:#070>&gt;</span>
            <span style=color:#070>&lt;array&gt;</span>
                <span style=color:#070>&lt;value&gt;</span>红楼梦<span style=color:#070>&lt;/value&gt;</span>
                <span style=color:#070>&lt;value&gt;</span>西游记<span style=color:#070>&lt;/value&gt;</span>
                <span style=color:#070>&lt;value&gt;</span>水浒传<span style=color:#070>&lt;/value&gt;</span>
                <span style=color:#070>&lt;value&gt;</span>三国演义<span style=color:#070>&lt;/value&gt;</span>
            <span style=color:#070>&lt;/array&gt;</span>
        <span style=color:#070>&lt;/property&gt;</span>
        <span style=color:#888>&lt;!--        List--&gt;</span>
        <span style=color:#070>&lt;property</span> <span style=color:#00c>name=</span><span style=background-color:#fff0f0>&#34;hobbys&#34;</span><span style=color:#070>&gt;</span>
            <span style=color:#070>&lt;list&gt;</span>
                <span style=color:#070>&lt;value&gt;</span>music<span style=color:#070>&lt;/value&gt;</span>
                <span style=color:#070>&lt;value&gt;</span>movie<span style=color:#070>&lt;/value&gt;</span>
                <span style=color:#070>&lt;value&gt;</span>picture<span style=color:#070>&lt;/value&gt;</span>
            <span style=color:#070>&lt;/list&gt;</span>
        <span style=color:#070>&lt;/property&gt;</span>
        <span style=color:#888>&lt;!--        Map--&gt;</span>
        <span style=color:#070>&lt;property</span> <span style=color:#00c>name=</span><span style=background-color:#fff0f0>&#34;card&#34;</span><span style=color:#070>&gt;</span>
            <span style=color:#070>&lt;map&gt;</span>
                <span style=color:#070>&lt;entry</span> <span style=color:#00c>key=</span><span style=background-color:#fff0f0>&#34;身份证&#34;</span> <span style=color:#00c>value=</span><span style=background-color:#fff0f0>&#34;123434324234&#34;</span><span style=color:#070>/&gt;</span>
                <span style=color:#070>&lt;entry</span> <span style=color:#00c>key=</span><span style=background-color:#fff0f0>&#34;银行卡&#34;</span> <span style=color:#00c>value=</span><span style=background-color:#fff0f0>&#34;23425234234234&#34;</span><span style=color:#070>/&gt;</span>
            <span style=color:#070>&lt;/map&gt;</span>
        <span style=color:#070>&lt;/property&gt;</span>
        <span style=color:#888>&lt;!--        Set--&gt;</span>
        <span style=color:#070>&lt;property</span> <span style=color:#00c>name=</span><span style=background-color:#fff0f0>&#34;games&#34;</span><span style=color:#070>&gt;</span>
            <span style=color:#070>&lt;set&gt;</span>
                <span style=color:#070>&lt;value&gt;</span>LOL<span style=color:#070>&lt;/value&gt;</span>
                <span style=color:#070>&lt;value&gt;</span>COC<span style=color:#070>&lt;/value&gt;</span>
                <span style=color:#070>&lt;value&gt;</span>Dota<span style=color:#070>&lt;/value&gt;</span>
            <span style=color:#070>&lt;/set&gt;</span>
        <span style=color:#070>&lt;/property&gt;</span>
        <span style=color:#888>&lt;!--        null--&gt;</span>
        <span style=color:#070>&lt;property</span> <span style=color:#00c>name=</span><span style=background-color:#fff0f0>&#34;wife&#34;</span><span style=color:#070>&gt;</span>
            <span style=color:#070>&lt;null/&gt;</span>
        <span style=color:#070>&lt;/property&gt;</span>
        <span style=color:#888>&lt;!--        Properties--&gt;</span>
        <span style=color:#070>&lt;property</span> <span style=color:#00c>name=</span><span style=background-color:#fff0f0>&#34;info&#34;</span><span style=color:#070>&gt;</span>
            <span style=color:#070>&lt;props&gt;</span>
                <span style=color:#070>&lt;prop</span> <span style=color:#00c>key=</span><span style=background-color:#fff0f0>&#34;xuehao&#34;</span><span style=color:#070>&gt;</span>31400029<span style=color:#070>&lt;/prop&gt;</span>
                <span style=color:#070>&lt;prop</span> <span style=color:#00c>key=</span><span style=background-color:#fff0f0>&#34;sex&#34;</span><span style=color:#070>&gt;</span>man<span style=color:#070>&lt;/prop&gt;</span>
                <span style=color:#070>&lt;prop</span> <span style=color:#00c>key=</span><span style=background-color:#fff0f0>&#34;username&#34;</span><span style=color:#070>&gt;</span>root<span style=color:#070>&lt;/prop&gt;</span>
                <span style=color:#070>&lt;prop</span> <span style=color:#00c>key=</span><span style=background-color:#fff0f0>&#34;password&#34;</span><span style=color:#070>&gt;</span>123456<span style=color:#070>&lt;/prop&gt;</span>
            <span style=color:#070>&lt;/props&gt;</span>
        <span style=color:#070>&lt;/property&gt;</span>
    <span style=color:#070>&lt;/bean&gt;</span>
</code></pre></div><h2 id=53-扩展方式注入>5.3. 扩展方式注入</h2>
<h3 id=531-p-nameworkspace>5.3.1. p-nameworkspace</h3>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#579>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style=color:#070>&lt;beans</span> <span style=color:#00c>xmlns=</span><span style=background-color:#fff0f0>&#34;http://www.springframework.org/schema/beans&#34;</span>
       <span style=color:#00c>xmlns:xsi=</span><span style=background-color:#fff0f0>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
       <span style=color:#00c>xmlns:p=</span><span style=background-color:#fff0f0>&#34;http://www.springframework.org/schema/p&#34;</span>
       <span style=color:#00c>xmlns:c=</span><span style=background-color:#fff0f0>&#34;http://www.springframework.org/schema/c&#34;</span>
       <span style=color:#00c>xsi:schemaLocation=</span><span style=background-color:#fff0f0>&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span style=color:#070>&gt;</span>

    <span style=color:#888>&lt;!-- p命名空间注入，可以直接注入属性的值: property--&gt;</span>
    <span style=color:#070>&lt;bean</span> <span style=color:#00c>id=</span><span style=background-color:#fff0f0>&#34;user&#34;</span> <span style=color:#00c>class=</span><span style=background-color:#fff0f0>&#34;com.siahk.pojo.User&#34;</span> <span style=color:#00c>p:name=</span><span style=background-color:#fff0f0>&#34;qinjiang&#34;</span> <span style=color:#00c>p:age=</span><span style=background-color:#fff0f0>&#34;18&#34;</span><span style=color:#070>/&gt;</span>
    <span style=color:#888>&lt;!-- c命名空间注入，通过构造器注入：construct-args--&gt;</span>
    <span style=color:#070>&lt;bean</span> <span style=color:#00c>id=</span><span style=background-color:#fff0f0>&#34;user2&#34;</span> <span style=color:#00c>class=</span><span style=background-color:#fff0f0>&#34;com.siahk.pojo.User&#34;</span> <span style=color:#00c>c:age=</span><span style=background-color:#fff0f0>&#34;18&#34;</span> <span style=color:#00c>c:name=</span><span style=background-color:#fff0f0>&#34;kuangshen&#34;</span><span style=color:#070>/&gt;</span>


<span style=color:#070>&lt;/beans&gt;</span>
</code></pre></div><h3 id=532-c-nameworkspace>5.3.2. c-nameworkspace</h3>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#579>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style=color:#070>&lt;beans</span> <span style=color:#00c>xmlns=</span><span style=background-color:#fff0f0>&#34;http://www.springframework.org/schema/beans&#34;</span>
       <span style=color:#00c>xmlns:xsi=</span><span style=background-color:#fff0f0>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
       <span style=color:#00c>xmlns:p=</span><span style=background-color:#fff0f0>&#34;http://www.springframework.org/schema/p&#34;</span>
       <span style=color:#00c>xmlns:c=</span><span style=background-color:#fff0f0>&#34;http://www.springframework.org/schema/c&#34;</span>
       <span style=color:#00c>xsi:schemaLocation=</span><span style=background-color:#fff0f0>&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span style=color:#070>&gt;</span>

    <span style=color:#888>&lt;!-- p命名空间注入，可以直接注入属性的值: property--&gt;</span>
    <span style=color:#070>&lt;bean</span> <span style=color:#00c>id=</span><span style=background-color:#fff0f0>&#34;user&#34;</span> <span style=color:#00c>class=</span><span style=background-color:#fff0f0>&#34;com.siahk.pojo.User&#34;</span> <span style=color:#00c>p:name=</span><span style=background-color:#fff0f0>&#34;qinjiang&#34;</span> <span style=color:#00c>p:age=</span><span style=background-color:#fff0f0>&#34;18&#34;</span><span style=color:#070>/&gt;</span>
    <span style=color:#888>&lt;!-- c命名空间注入，通过构造器注入：construct-args--&gt;</span>
    <span style=color:#070>&lt;bean</span> <span style=color:#00c>id=</span><span style=background-color:#fff0f0>&#34;user2&#34;</span> <span style=color:#00c>class=</span><span style=background-color:#fff0f0>&#34;com.siahk.pojo.User&#34;</span> <span style=color:#00c>c:age=</span><span style=background-color:#fff0f0>&#34;18&#34;</span> <span style=color:#00c>c:name=</span><span style=background-color:#fff0f0>&#34;kuangshen&#34;</span><span style=color:#070>/&gt;</span>


<span style=color:#070>&lt;/beans&gt;</span>
</code></pre></div><h3 id=测试>测试</h3>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>    <span style=color:#555;font-weight:700>@Test</span>
    <span style=color:#080;font-weight:700>public</span> <span style=color:#339;font-weight:700>void</span> <span style=color:#06b;font-weight:700>test2</span><span style=color:#333>()</span> <span style=color:#333>{</span>
        ApplicationContext context <span style=color:#333>=</span> <span style=color:#080;font-weight:700>new</span> ClassPathXmlApplicationContext<span style=color:#333>(</span><span style=background-color:#fff0f0>&#34;userbeans.xml&#34;</span><span style=color:#333>);</span>
        User user <span style=color:#333>=</span> context<span style=color:#333>.</span><span style=color:#00c>getBean</span><span style=color:#333>(</span><span style=background-color:#fff0f0>&#34;user2&#34;</span><span style=color:#333>,</span> User<span style=color:#333>.</span><span style=color:#00c>class</span><span style=color:#333>);</span>
        System<span style=color:#333>.</span><span style=color:#00c>out</span><span style=color:#333>.</span><span style=color:#00c>println</span><span style=color:#333>(</span>user<span style=color:#333>);</span>
    <span style=color:#333>}</span>
</code></pre></div><h1 id=6-beanscope>6. Bean&rsquo;Scope</h1>
<table>
<thead>
<tr>
<th style=text-align:center>Scope</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style=text-align:center>singleton</td>
<td>(Default) Scopes a single bean definition to a single object instance for each Spring IoC container.</td>
</tr>
<tr>
<td style=text-align:center>prototype</td>
<td>Scopes a single bean definition to any number of object instances.</td>
</tr>
<tr>
<td style=text-align:center>request</td>
<td>Scopes a single bean definition to the lifecycle of a single HTTP request. That is, each HTTP request has its own instance of a bean created off the back of a single bean definition. Only valid in the context of a web-aware Spring ApplicationContext.</td>
</tr>
<tr>
<td style=text-align:center>session</td>
<td>Scopes a single bean definition to the lifecycle of an HTTP <code>Session</code>. Only valid in the context of a web-aware Spring <code>ApplicationContext</code>.</td>
</tr>
<tr>
<td style=text-align:center>application</td>
<td>Scopes a single bean definition to the lifecycle of a <code>ServletContext</code>. Only valid in the context of a web-aware Spring <code>ApplicationContext</code>.</td>
</tr>
<tr>
<td style=text-align:center>websocket</td>
<td>Scopes a single bean definition to the lifecycle of a <code>WebSocket</code>. Only valid in the context of a web-aware Spring <code>ApplicationContext</code>.</td>
</tr>
<tr>
<td style=text-align:center></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id=61-bean-singleton-mode-单例模式spring默认机制>6.1. Bean singleton mode (单例模式：Spring默认机制)</h2>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#070>&lt;bean</span> <span style=color:#00c>id=</span><span style=background-color:#fff0f0>&#34;user2&#34;</span> <span style=color:#00c>class=</span><span style=background-color:#fff0f0>&#34;com.siahk.pojo.User&#34;</span> <span style=color:#00c>c:age=</span><span style=background-color:#fff0f0>&#34;18&#34;</span> <span style=color:#00c>c:name=</span><span style=background-color:#fff0f0>&#34;kuangshen&#34;</span> <span style=color:#00c>scope=</span><span style=background-color:#fff0f0>&#34;singleton&#34;</span><span style=color:#070>/&gt;</span>
</code></pre></div><h2 id=62-bean-prototype-mode-原型模式每次获取的都是新对象>6.2. Bean prototype mode （原型模式：每次获取的都是新对象）</h2>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#070>&lt;bean</span> <span style=color:#00c>id=</span><span style=background-color:#fff0f0>&#34;user3&#34;</span> <span style=color:#00c>class=</span><span style=background-color:#fff0f0>&#34;com.siahk.pojo.User&#34;</span> <span style=color:#00c>c:age=</span><span style=background-color:#fff0f0>&#34;18&#34;</span> <span style=color:#00c>c:name=</span><span style=background-color:#fff0f0>&#34;kuangshen&#34;</span> <span style=color:#00c>scope=</span><span style=background-color:#fff0f0>&#34;prototype&#34;</span><span style=color:#070>/&gt;</span>
</code></pre></div><h2 id=63-其余requestsessionapplication只在web开发中使用>6.3. 其余：request、session、application，只在web开发中使用</h2>
<h1 id=7-bean-的自动装配>7. Bean 的自动装配</h1>
<ul>
<li>自动装配是Spring满足Bean依赖一种方式。</li>
<li>Spring会在上下文中自动寻找，并自动给bean装配属性。</li>
</ul>
<ol>
<li>
<p>xml中显示的配置</p>
</li>
<li>
<p>java中显示配置</p>
</li>
<li>
<p>隐式的自动装配bean【重要】</p>
</li>
</ol>
<h2 id=71-测试>7.1. 测试</h2>
<p>环境搭建：一个人有两个宠物</p>
<h2 id=72-自动装配byname>7.2. 自动装配：byName</h2>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml>    <span style=color:#070>&lt;bean</span> <span style=color:#00c>id=</span><span style=background-color:#fff0f0>&#34;cat&#34;</span> <span style=color:#00c>class=</span><span style=background-color:#fff0f0>&#34;com.siahk.pojo.Cat&#34;</span><span style=color:#070>/&gt;</span>
    <span style=color:#070>&lt;bean</span> <span style=color:#00c>id=</span><span style=background-color:#fff0f0>&#34;dog&#34;</span> <span style=color:#00c>class=</span><span style=background-color:#fff0f0>&#34;com.siahk.pojo.Dog&#34;</span><span style=color:#070>/&gt;</span>
<span style=color:#888>&lt;!--
</span><span style=color:#888>    byName: 会自动在容器的上下文中查找和自己对象set方法后面的值对应的 beanid。
</span><span style=color:#888>--&gt;</span>
    <span style=color:#070>&lt;bean</span> <span style=color:#00c>id=</span><span style=background-color:#fff0f0>&#34;people&#34;</span> <span style=color:#00c>class=</span><span style=background-color:#fff0f0>&#34;com.siahk.pojo.People&#34;</span> <span style=color:#00c>autowire=</span><span style=background-color:#fff0f0>&#34;byName&#34;</span><span style=color:#070>&gt;</span>
<span style=color:#888>&lt;!--        &lt;property name=&#34;cat&#34; ref=&#34;cat&#34;/&gt;--&gt;</span>
<span style=color:#888>&lt;!--        &lt;property name=&#34;dog&#34; ref=&#34;dog&#34;/&gt;--&gt;</span>
        <span style=color:#070>&lt;property</span> <span style=color:#00c>name=</span><span style=background-color:#fff0f0>&#34;name&#34;</span> <span style=color:#00c>value=</span><span style=background-color:#fff0f0>&#34;kuangshen&#34;</span><span style=color:#070>/&gt;</span>
    <span style=color:#070>&lt;/bean&gt;</span>
</code></pre></div><h2 id=73-自动装配bytype>7.3. 自动装配：byType</h2>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml>    <span style=color:#070>&lt;bean</span> <span style=color:#00c>class=</span><span style=background-color:#fff0f0>&#34;com.siahk.pojo.Cat&#34;</span><span style=color:#070>/&gt;</span>
    <span style=color:#070>&lt;bean</span> <span style=color:#00c>class=</span><span style=background-color:#fff0f0>&#34;com.siahk.pojo.Dog&#34;</span><span style=color:#070>/&gt;</span>
<span style=color:#888>&lt;!--
</span><span style=color:#888>    byType: 会自动在容器的上下文中查找和自己对象属性类型相同的 beanid。
</span><span style=color:#888>--&gt;</span>
    <span style=color:#070>&lt;bean</span> <span style=color:#00c>id=</span><span style=background-color:#fff0f0>&#34;people&#34;</span> <span style=color:#00c>class=</span><span style=background-color:#fff0f0>&#34;com.siahk.pojo.People&#34;</span> <span style=color:#00c>autowire=</span><span style=background-color:#fff0f0>&#34;byType&#34;</span><span style=color:#070>&gt;</span>
        <span style=color:#070>&lt;property</span> <span style=color:#00c>name=</span><span style=background-color:#fff0f0>&#34;name&#34;</span> <span style=color:#00c>value=</span><span style=background-color:#fff0f0>&#34;kuangshen&#34;</span><span style=color:#070>/&gt;</span>
    <span style=color:#070>&lt;/bean&gt;</span>
</code></pre></div><h2 id=小结>小结</h2>
<ul>
<li>byName：需要保证id唯一，bean的id需要于set方法的值唯一。</li>
<li>byType：保证类型唯一，bean的属性的类型一致。</li>
</ul>
<hr>
<h2 id=74-使用注解实现自动装配>7.4. 使用注解实现自动装配</h2>
<p>使用注解须知：</p>
<ol>
<li>导入约束：context约束</li>
<li>== 配置注解的支持：<code>&lt;context:annotation-config/></code> == 重要 ==</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#579>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style=color:#070>&lt;beans</span> <span style=color:#00c>xmlns=</span><span style=background-color:#fff0f0>&#34;http://www.springframework.org/schema/beans&#34;</span>
   <span style=color:#00c>xmlns:xsi=</span><span style=background-color:#fff0f0>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
   <span style=color:#00c>xmlns:context=</span><span style=background-color:#fff0f0>&#34;http://www.springframework.org/schema/context&#34;</span>
   <span style=color:#00c>xsi:schemaLocation=</span><span style=background-color:#fff0f0>&#34;http://www.springframework.org/schema/beans
</span><span style=background-color:#fff0f0>       https://www.springframework.org/schema/beans/spring-beans.xsd
</span><span style=background-color:#fff0f0>       http://www.springframework.org/schema/context
</span><span style=background-color:#fff0f0>       https://www.springframework.org/schema/context/spring-context.xsd&#34;</span><span style=color:#070>&gt;</span>

   <span style=color:#070>&lt;context:annotation-config/&gt;</span>

<span style=color:#070>&lt;/beans&gt;</span>
</code></pre></div><p><strong>@Autowired</strong></p>
<ol>
<li>直接在属性上使用，也可以在set方式上使用。</li>
<li>使用Autowired可以不编写Set方法，前提是自动装配的属性在IOC容器中存在，且符合名字byName。</li>
</ol>
<p>如果 <strong>@Autowired</strong> 自动装配的环境比较复杂，可以通过 <strong>@Qualifier(value=&ldquo;ex&rdquo;)</strong> 配合使用，指定一个唯一一个bean对象注入。</p>
<p><strong>@Resource</strong></p>
<p>小结： <strong>@Autowired</strong> 和 <strong>@Resource</strong> 的区别</p>
<ul>
<li>用于自动装配，放在属性段上。</li>
<li><strong>@Autowired</strong> 通过byname的方式实现； <strong>@Resource</strong> 通过byName的方式实现，如果找不到则通过byType实现，两个都找不到的情况下，就报错。</li>
<li>执行顺序不同： <strong>@Autowired</strong> 通过类型、名字； <strong>@Resource</strong> 通过名字、类型。</li>
</ul>
<h1 id=8-注解开发>8. 注解开发</h1>
<p>使用Spring的注解开发，必须保证Aop的包导入。</p>
<p>使用注解需要导入context约束，增加注解的支持。</p>
<p>代码：</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml> <span style=color:#579>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style=color:#070>&lt;beans</span> <span style=color:#00c>xmlns=</span><span style=background-color:#fff0f0>&#34;http://www.springframework.org/schema/beans&#34;</span>
    <span style=color:#00c>xmlns:xsi=</span><span style=background-color:#fff0f0>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
    <span style=color:#00c>xmlns:context=</span><span style=background-color:#fff0f0>&#34;http://www.springframework.org/schema/context&#34;</span>
    <span style=color:#00c>xsi:schemaLocation=</span><span style=background-color:#fff0f0>&#34;http://www.springframework.org/schema/beans
</span><span style=background-color:#fff0f0>        https://www.springframework.org/schema/beans/spring-beans.xsd
</span><span style=background-color:#fff0f0>        http://www.springframework.org/schema/context
</span><span style=background-color:#fff0f0>        https://www.springframework.org/schema/context/spring-context.xsd&#34;</span><span style=color:#070>&gt;</span>

    <span style=color:#070>&lt;context:annotation-config/&gt;</span>

<span style=color:#070>&lt;/beans&gt;</span>
</code></pre></div><h2 id=81-bean>8.1. bean</h2>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#888>//等价于 &lt;bean id=&#34;user&#34; class=&#34;com.siahk.dao.User&#34;/&gt;
</span><span style=color:#888>//Component: 组件
</span><span style=color:#888></span>
<span style=color:#555;font-weight:700>@Component</span>
<span style=color:#080;font-weight:700>public</span> <span style=color:#080;font-weight:700>class</span> <span style=color:#b06;font-weight:700>User</span> <span style=color:#333>{</span>
    <span style=color:#080;font-weight:700>public</span> String name <span style=color:#333>=</span> <span style=background-color:#fff0f0>&#34;qinjiang&#34;</span><span style=color:#333>;</span>
<span style=color:#333>}</span>
</code></pre></div><h2 id=82-属性如何注入>8.2. 属性如何注入</h2>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#080;font-weight:700>public</span> <span style=color:#080;font-weight:700>class</span> <span style=color:#b06;font-weight:700>User</span> <span style=color:#333>{</span>

    <span style=color:#888>// 相当于 &lt;property name=&#34;name&#34; value=&#34;kuangshen&#34;/&gt;
</span><span style=color:#888></span>    <span style=color:#555;font-weight:700>@Value</span><span style=color:#333>(</span><span style=background-color:#fff0f0>&#34;kuangshen&#34;</span><span style=color:#333>)</span>
    <span style=color:#080;font-weight:700>public</span> String name<span style=color:#333>;</span>
<span style=color:#333>}</span>
</code></pre></div><h2 id=83-衍生的注解>8.3. 衍生的注解</h2>
<p><strong>@Component</strong> 有几个衍生注解，在web开发中，会按照mvc三层构架分层。</p>
<ul>
<li>dao: <strong>@Repository</strong></li>
<li>service: <strong>@Service</strong></li>
<li>controller: <strong>@Controller</strong></li>
</ul>
<p>功能一样，将类注册到容器中，装配 Bean</p>
<h2 id=84-自动装配>8.4. 自动装配</h2>
<ul>
<li><strong>@Autowired</strong>：自动装配通过类型、名字；如果 <strong>@Autowired</strong> 自动装配的环境比较复杂，可以通过 <strong>@Qualifier(value=&ldquo;ex&rdquo;)</strong> 配合使用，指定一个唯一一个bean对象注入。</li>
<li><strong>@Nullable</strong>：字段标记了这个注解，说明这个字段可以为Null。</li>
<li><strong>@Resource</strong>：自动装配通过名字、类型。</li>
</ul>
<h2 id=85-作用域>8.5. 作用域</h2>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#555;font-weight:700>@Component</span>
<span style=color:#555;font-weight:700>@Scope</span><span style=color:#333>(</span><span style=background-color:#fff0f0>&#34;singleton&#34;</span><span style=color:#333>)</span>
<span style=color:#080;font-weight:700>public</span> <span style=color:#080;font-weight:700>class</span> <span style=color:#b06;font-weight:700>User</span> <span style=color:#333>{</span>

    <span style=color:#888>// 相当于 &lt;property name=&#34;name&#34; value=&#34;kuangshen&#34;/&gt;
</span><span style=color:#888></span>    <span style=color:#555;font-weight:700>@Value</span><span style=color:#333>(</span><span style=background-color:#fff0f0>&#34;kuangshen&#34;</span><span style=color:#333>)</span>
    <span style=color:#080;font-weight:700>public</span> String name<span style=color:#333>;</span>
<span style=color:#333>}</span>
</code></pre></div><h2 id=86-小结>8.6. 小结</h2>
<ul>
<li>xml 和 注解
<ul>
<li>xml更加万能，适用于任何场景，维护简单方便。</li>
<li>注解不是自己的类使用不了，维护相对复杂。</li>
</ul>
</li>
<li>xml 与 注解 的最佳实践
<ul>
<li>xml 用来管理bean；</li>
<li>注解只负责完成属性的注入；</li>
<li>使用过程中需要注意一个问题：让注解生效，就需要开启注解的支持。</li>
</ul>
</li>
</ul>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#888>&lt;!--    指定要扫描的包，这个包下的注解就会生效。--&gt;</span>
    <span style=color:#070>&lt;context:component-scan</span> <span style=color:#00c>base-package=</span><span style=background-color:#fff0f0>&#34;com.siahk.pojo&#34;</span><span style=color:#070>/&gt;</span>
    <span style=color:#070>&lt;context:annotation-config/&gt;</span>
</code></pre></div><h1 id=9-使用java的方式配置spring>9. 使用Java的方式配置Spring</h1>
<p>不使用Spring的xml配置，全权交给java做。</p>
<p>实体类：</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#080;font-weight:700>public</span> <span style=color:#080;font-weight:700>class</span> <span style=color:#b06;font-weight:700>User</span> <span style=color:#333>{</span>
    <span style=color:#080;font-weight:700>private</span> String name<span style=color:#333>;</span>

    <span style=color:#080;font-weight:700>public</span> String <span style=color:#06b;font-weight:700>getName</span><span style=color:#333>()</span> <span style=color:#333>{</span>
        <span style=color:#080;font-weight:700>return</span> name<span style=color:#333>;</span>
    <span style=color:#333>}</span>

    <span style=color:#555;font-weight:700>@Value</span><span style=color:#333>(</span><span style=background-color:#fff0f0>&#34;Qinjiang&#34;</span><span style=color:#333>)</span> <span style=color:#888>//属性注入值
</span><span style=color:#888></span>    <span style=color:#080;font-weight:700>public</span> <span style=color:#339;font-weight:700>void</span> <span style=color:#06b;font-weight:700>setName</span><span style=color:#333>(</span>String name<span style=color:#333>)</span> <span style=color:#333>{</span>
        <span style=color:#080;font-weight:700>this</span><span style=color:#333>.</span><span style=color:#00c>name</span> <span style=color:#333>=</span> name<span style=color:#333>;</span>
    <span style=color:#333>}</span>

    <span style=color:#555;font-weight:700>@Override</span>
    <span style=color:#080;font-weight:700>public</span> String <span style=color:#06b;font-weight:700>toString</span><span style=color:#333>()</span> <span style=color:#333>{</span>
        <span style=color:#080;font-weight:700>return</span> <span style=background-color:#fff0f0>&#34;User{&#34;</span> <span style=color:#333>+</span>
                <span style=background-color:#fff0f0>&#34;name=&#39;&#34;</span> <span style=color:#333>+</span> name <span style=color:#333>+</span> <span style=color:#04d;background-color:#fff0f0>&#39;\&#39;&#39;</span> <span style=color:#333>+</span>
                <span style=color:#04d;background-color:#fff0f0>&#39;}&#39;</span><span style=color:#333>;</span>
    <span style=color:#333>}</span>
<span style=color:#333>}</span>

</code></pre></div><p>测试类：</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#080;font-weight:700>public</span> <span style=color:#080;font-weight:700>class</span> <span style=color:#b06;font-weight:700>MyTest</span> <span style=color:#333>{</span>
    <span style=color:#080;font-weight:700>public</span> <span style=color:#080;font-weight:700>static</span> <span style=color:#339;font-weight:700>void</span> <span style=color:#06b;font-weight:700>main</span><span style=color:#333>(</span>String<span style=color:#333>[]</span> args<span style=color:#333>)</span> <span style=color:#333>{</span>

        <span style=color:#888>// 如果完全使用了配置类方式去做，就只能通过 AnnotationConfig 上下文来获取容器，通过配置类的class对象加载。
</span><span style=color:#888></span>        ApplicationContext context <span style=color:#333>=</span> <span style=color:#080;font-weight:700>new</span> AnnotationConfigApplicationContext<span style=color:#333>(</span>SiahkConfig<span style=color:#333>.</span><span style=color:#00c>class</span><span style=color:#333>);</span>

        User getUser <span style=color:#333>=</span> context<span style=color:#333>.</span><span style=color:#00c>getBean</span><span style=color:#333>(</span><span style=background-color:#fff0f0>&#34;user&#34;</span><span style=color:#333>,</span> User<span style=color:#333>.</span><span style=color:#00c>class</span><span style=color:#333>);</span>
        System<span style=color:#333>.</span><span style=color:#00c>out</span><span style=color:#333>.</span><span style=color:#00c>println</span><span style=color:#333>(</span>getUser<span style=color:#333>.</span><span style=color:#00c>getName</span><span style=color:#333>());</span>
    <span style=color:#333>}</span>
<span style=color:#333>}</span>
</code></pre></div><p>配置文件：</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#888>// 这个也会被Spring容器托管，注册到容器中，因为它也是一个@Component。
</span><span style=color:#888>// @Configuration 代表这是一个配置类，和bean.xml是一样的。
</span><span style=color:#888></span><span style=color:#555;font-weight:700>@Configuration</span>
<span style=color:#555;font-weight:700>@Component</span><span style=color:#333>(</span><span style=background-color:#fff0f0>&#34;com.siahk.pojo&#34;</span><span style=color:#333>)</span>
<span style=color:#555;font-weight:700>@Import</span><span style=color:#333>(</span>com<span style=color:#333>.</span><span style=color:#00c>siahk</span><span style=color:#333>.</span><span style=color:#00c>pojo</span><span style=color:#333>.</span><span style=color:#00c>config</span><span style=color:#333>.</span><span style=color:#00c>SiahkConfig2</span><span style=color:#333>.</span><span style=color:#00c>class</span><span style=color:#333>)</span>
<span style=color:#080;font-weight:700>public</span> <span style=color:#080;font-weight:700>class</span> <span style=color:#b06;font-weight:700>SiahkConfig</span> <span style=color:#333>{</span>

    <span style=color:#888>// 注册一个Bean就相当于之前写的一个Bean标签。
</span><span style=color:#888></span>    <span style=color:#888>// 这个方法的名字就相当于bean标签中的id属性。
</span><span style=color:#888></span>    <span style=color:#888>// 这个方法的返回值，就相当于bean标签中的class属性。
</span><span style=color:#888></span>    <span style=color:#555;font-weight:700>@Bean</span>
    <span style=color:#080;font-weight:700>public</span> User <span style=color:#06b;font-weight:700>user</span><span style=color:#333>(){</span>
        <span style=color:#080;font-weight:700>return</span> <span style=color:#080;font-weight:700>new</span> User<span style=color:#333>();</span> <span style=color:#888>// 就是返回要注入到bean的对象。
</span><span style=color:#888></span>    <span style=color:#333>}</span>
<span style=color:#333>}</span>
</code></pre></div><p>这种纯Java的配置方式，在Springboot中随处可见。</p>
<h1 id=10-代理模式>10. 代理模式</h1>
<h2 id=101-静态代理>10.1 静态代理</h2>
<p>角色分析：</p>
<ul>
<li>抽象角色：一般会使用接口或抽象类解决。</li>
<li>真实角色：被代理的角色。</li>
<li>代理角色：代理真实角色，代理真实角色后，我们一般会做一些附属操作。</li>
<li>客户：访问代理对象的人。</li>
</ul>
<p>代码步骤（租房例子）：</p>
<ol>
<li>接口</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#080;font-weight:700>public</span> <span style=color:#080;font-weight:700>interface</span> <span style=color:#b06;font-weight:700>Rent</span> <span style=color:#333>{</span>
    <span style=color:#080;font-weight:700>public</span> <span style=color:#339;font-weight:700>void</span> <span style=color:#06b;font-weight:700>rent</span><span style=color:#333>();</span>
<span style=color:#333>}</span>
</code></pre></div><ol start=2>
<li>真实角色</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#080;font-weight:700>public</span> <span style=color:#080;font-weight:700>class</span> <span style=color:#b06;font-weight:700>Host</span> <span style=color:#080;font-weight:700>implements</span> Rent <span style=color:#333>{</span>
    <span style=color:#080;font-weight:700>public</span> <span style=color:#339;font-weight:700>void</span> <span style=color:#06b;font-weight:700>rent</span><span style=color:#333>(){</span>
        System<span style=color:#333>.</span><span style=color:#00c>out</span><span style=color:#333>.</span><span style=color:#00c>println</span><span style=color:#333>(</span><span style=background-color:#fff0f0>&#34;房东要出租房子&#34;</span><span style=color:#333>);</span>
    <span style=color:#333>}</span>
<span style=color:#333>}</span>
</code></pre></div><ol start=3>
<li>代理角色</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#080;font-weight:700>public</span> <span style=color:#080;font-weight:700>class</span> <span style=color:#b06;font-weight:700>Proxy</span> <span style=color:#080;font-weight:700>implements</span> Rent <span style=color:#333>{</span>
    <span style=color:#080;font-weight:700>private</span> Host host<span style=color:#333>;</span>

    <span style=color:#080;font-weight:700>public</span> <span style=color:#06b;font-weight:700>Proxy</span><span style=color:#333>()</span> <span style=color:#333>{</span>
    <span style=color:#333>}</span>

    <span style=color:#080;font-weight:700>public</span> <span style=color:#06b;font-weight:700>Proxy</span><span style=color:#333>(</span>Host host<span style=color:#333>)</span> <span style=color:#333>{</span>
        <span style=color:#080;font-weight:700>this</span><span style=color:#333>.</span><span style=color:#00c>host</span> <span style=color:#333>=</span> host<span style=color:#333>;</span>
    <span style=color:#333>}</span>

    <span style=color:#555;font-weight:700>@Override</span>
    <span style=color:#080;font-weight:700>public</span> <span style=color:#339;font-weight:700>void</span> <span style=color:#06b;font-weight:700>rent</span><span style=color:#333>()</span> <span style=color:#333>{</span>
        host<span style=color:#333>.</span><span style=color:#00c>rent</span><span style=color:#333>();</span>
        System<span style=color:#333>.</span><span style=color:#00c>out</span><span style=color:#333>.</span><span style=color:#00c>println</span><span style=color:#333>(</span><span style=background-color:#fff0f0>&#34;中介出租房子&#34;</span><span style=color:#333>);</span>
    <span style=color:#333>}</span>

    <span style=color:#888>// 看房
</span><span style=color:#888></span>    <span style=color:#080;font-weight:700>public</span> <span style=color:#339;font-weight:700>void</span> <span style=color:#06b;font-weight:700>seeHouse</span><span style=color:#333>()</span> <span style=color:#333>{</span>
        System<span style=color:#333>.</span><span style=color:#00c>out</span><span style=color:#333>.</span><span style=color:#00c>println</span><span style=color:#333>(</span><span style=background-color:#fff0f0>&#34;Proxy seeHouse.&#34;</span><span style=color:#333>);</span>
    <span style=color:#333>}</span>

    <span style=color:#888>// 合同
</span><span style=color:#888></span>    <span style=color:#080;font-weight:700>public</span> <span style=color:#339;font-weight:700>void</span> <span style=color:#06b;font-weight:700>hetong</span><span style=color:#333>()</span> <span style=color:#333>{</span>
        System<span style=color:#333>.</span><span style=color:#00c>out</span><span style=color:#333>.</span><span style=color:#00c>println</span><span style=color:#333>(</span><span style=background-color:#fff0f0>&#34;hetong&#34;</span><span style=color:#333>);</span>
    <span style=color:#333>}</span>

    <span style=color:#888>// 中介费
</span><span style=color:#888></span>    <span style=color:#080;font-weight:700>public</span> <span style=color:#339;font-weight:700>void</span> <span style=color:#06b;font-weight:700>fare</span><span style=color:#333>(){</span>
        System<span style=color:#333>.</span><span style=color:#00c>out</span><span style=color:#333>.</span><span style=color:#00c>println</span><span style=color:#333>(</span><span style=background-color:#fff0f0>&#34;fare&#34;</span><span style=color:#333>);</span>
    <span style=color:#333>}</span>
<span style=color:#333>}</span>
</code></pre></div><ol start=4>
<li>客户端访问代理角色</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#080;font-weight:700>public</span> <span style=color:#080;font-weight:700>class</span> <span style=color:#b06;font-weight:700>Client</span> <span style=color:#333>{</span>
    <span style=color:#080;font-weight:700>public</span> <span style=color:#080;font-weight:700>static</span> <span style=color:#339;font-weight:700>void</span> <span style=color:#06b;font-weight:700>main</span><span style=color:#333>(</span>String<span style=color:#333>[]</span> args<span style=color:#333>)</span> <span style=color:#333>{</span>
        Host host <span style=color:#333>=</span> <span style=color:#080;font-weight:700>new</span> Host<span style=color:#333>();</span>
        <span style=color:#888>// 代理,中介帮房东出租房子，但是代理角色一般会有一些附属操作。
</span><span style=color:#888></span>        Proxy proxy <span style=color:#333>=</span> <span style=color:#080;font-weight:700>new</span> Proxy<span style=color:#333>(</span>host<span style=color:#333>);</span>

        <span style=color:#888>// 不用面对房东，直接找中介租房即可。
</span><span style=color:#888></span>        proxy<span style=color:#333>.</span><span style=color:#00c>rent</span><span style=color:#333>();</span>
    <span style=color:#333>}</span>
<span style=color:#333>}</span>
</code></pre></div><p>代理模式的好处：</p>
<ul>
<li>可以使真实角色的操作更加存粹，不用去关注一些公共业务。</li>
<li>公共业务就交给代理角色，实现了业务的分工。</li>
<li>公共业务发生扩展的时候，方便集中管理。</li>
</ul>
<p>缺点：</p>
<ul>
<li>一个真实角色就会产生一个代理角色；代码量会翻倍，开发效率会变低。</li>
</ul>
<h2 id=102-加深理解>10.2 加深理解</h2>
<h2 id=103-动态代理>10.3 动态代理</h2>
<ul>
<li>动态代理静态代理角色一样，</li>
<li>动态代理的代理类是动态生成的，不是我们直接写好的。</li>
<li>动态代理也分为两大类：基于接口的动态代理；基于类的动态代理。
<ul>
<li>基于接口&ndash;JDK 动态代理</li>
<li>基于类： cglib</li>
<li>java字节码实现：javasist</li>
</ul>
</li>
</ul>
<p>需要了解两个类：Proxy（代理），InvocationHandler（调用处理程序）</p>
<p>动态代理的好处：</p>
<ul>
<li>可以使真实角色的操作更加存粹，不用去关注一些公共业务。</li>
<li>公共业务就交给代理角色，实现了业务的分工。</li>
<li>公共业务发生扩展的时候，方便集中管理。</li>
<li>一个动态代理类代理的是一个接口，一般就是对应一类业务。</li>
<li>一个动态代理类可以代理多个类，只要是实现了同一个接口即可。</li>
</ul>
<h1 id=11-aop>11. AOP</h1>
<h2 id=112-aop在spring中的作用>11.2. Aop在Spring中的作用</h2>
<p>提供声明式事务：允许用户自定义切面</p>
<ul>
<li>横切关注点：跨越应用程序多个模块的方法和功能，即是，与我们的业务逻辑无关的，但是我们需要关注的部分，就是横切关注点。入日志，安全，缓存，事务等等……</li>
<li>切面（ASPECT）：横切关注点被模块化的特殊对象。即，它是一个类。</li>
<li>通知（Advice）：切面必须要完成的工作，即，它是类中的一个方法。</li>
<li>目标（Target）：被通知对象。</li>
<li>代理（Proxy）：向目标对象应用通知之后创建的对象。</li>
<li>切入点（PointCut）：切面通知执行的“地点”的定义。</li>
<li>连接点（JoinPoint）：与切入点匹配的执行点。</li>
</ul>
<p>SpringAOP中，通过Advice定义横切逻辑，Spring中支持5中类型的Advice：
</p>
<table>
<thead>
<tr>
<th style=text-align:center>通知类型</th>
<th style=text-align:center>连接点</th>
<th style=text-align:left>实现接口</th>
</tr>
</thead>
<tbody>
<tr>
<td style=text-align:center>前置通知</td>
<td style=text-align:center>方法前</td>
<td style=text-align:left>org.springframework.aop.MethodBeforeAdvice</td>
</tr>
<tr>
<td style=text-align:center>后置通知</td>
<td style=text-align:center>方法后</td>
<td style=text-align:left>org.springframework.aop.AfterReturningAdvice</td>
</tr>
<tr>
<td style=text-align:center>环绕通知</td>
<td style=text-align:center>方法前后</td>
<td style=text-align:left>org.aopalliance.intercept.MethodInterceptor</td>
</tr>
<tr>
<td style=text-align:center>异常抛出通知</td>
<td style=text-align:center>方法抛出异常</td>
<td style=text-align:left>org.springframework.aop.ThrowsAdvice</td>
</tr>
<tr>
<td style=text-align:center>引介通知</td>
<td style=text-align:center>类中增加新的方法属性</td>
<td style=text-align:left>org.springframework.aop.IntroductionInterceptor</td>
</tr>
</tbody>
</table>
<p>即 Aop 在不改变原有代码的情况下，去增加新的功能。</p>
<h2 id=113-使用spring实现aop>11.3. 使用Spring实现Aop</h2>
<p>【重点】使用AOP植入，需要导入一个依赖包。</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#888>&lt;!-- https://mvnrepository.com/artifact/org.aspectj/aspectjweaver --&gt;</span>
<span style=color:#070>&lt;dependency&gt;</span>
    <span style=color:#070>&lt;groupId&gt;</span>org.aspectj<span style=color:#070>&lt;/artifactId&gt;</span>
    <span style=color:#070>&lt;artifactId&gt;</span>aspectjweaver<span style=color:#070>&lt;/artifactId&gt;</span>
    <span style=color:#070>&lt;version&gt;</span>1.9.4<span style=color:#070>&lt;/version&gt;</span>
<span style=color:#070>&lt;/dependency&gt;</span>
</code></pre></div><p>方式一：使用Spring的API接口【主要SpringAPI接口实现】</p>
<p>方式二：自定义来实现AOP【主要是切面定义】</p>
<p>方式三：使用注解实现</p>
<h1 id=12-整合mybatis>12. 整合Mybatis</h1>
<p>步骤：</p>
<ol>
<li>导入相关jar包
<ul>
<li>junit</li>
<li>mybatis</li>
<li>mysql数据库</li>
<li>spring相关的</li>
<li>aop织入</li>
<li>mybtis-spring</li>
</ul>
</li>
<li>编写配置文件</li>
<li>测试</li>
</ol>
<h2 id=121-回忆mybatis>12.1. 回忆mybatis</h2>
<ol>
<li>编写实体类</li>
<li>编写核心配置文件</li>
<li>编写接口</li>
<li>编写Mapper.xml</li>
<li>测试</li>
</ol>
<h2 id=122>12.2.</h2>
<h1 id=13-声明式事务>13. 声明式事务</h1>
<h2 id=131-回顾事务>13.1. 回顾事务</h2>
<ul>
<li>把一组业务当成一个业务来做；要么都成功，要么都失败。</li>
<li>事务在项目开发中，十分的重要，涉及到数据的一致性问题，不能马虎。</li>
<li>确保完整性和一致性。</li>
</ul>
<p>事务ACID原则：</p>
<ul>
<li>原子性</li>
<li>一致性</li>
<li>隔离性
<ul>
<li>多个可能操作同一个资源，防止数据损坏。</li>
</ul>
</li>
<li>持久性
<ul>
<li>事务一旦提交，无论系统发生什么问题，结果都不会再被影响，被持久化的写道存储器中。</li>
</ul>
</li>
</ul>
<h2 id=132-spring-中的事务管理>13.2. spring 中的事务管理</h2>
<ul>
<li>声明式事务：AOP</li>
<li>编程式事务：需要在代码中，进行事务的管理</li>
</ul>
<p>思考：</p>
<p>为什么需要事务？</p>
<ul>
<li>如果不配置事务，可能存在数据提交不一致的情况。</li>
<li>如果我们不在 spring 中取配置声明式事务，我们就需要在代码中手动配置事务。</li>
<li>事务在项目的开发中十分重要，涉及到事务的一致性和完整性问题，不容马虎。</li>
</ul>
</div>
<div class=tags>
<div class=taxosfloating_left>
<p>Tags</p>
</div>
<div class=termsfloating_right>
<p>
<a href=/tags/ioc/> ioc </a>
<a href=/tags/spring/> spring </a>
</p>
</div>
<div class=clearit></div>
</div></div>
</main>
<footer>
© Copyright notice | <a href=https://github.com/dataCobra/hugo-vitae>Vitae</a> theme for <a href=https://gohugo.io>Hugo</a>
</footer>
</body>
</html>